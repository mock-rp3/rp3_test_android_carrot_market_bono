# 📌 API Sheet
> ### [Carrot Market API](https://docs.google.com/spreadsheets/d/1AN8mMcLtqntN6YwmVyS9J1ptAL1yD-AK/edit#gid=990061567)

<br />

# 📌 1주차 목표 작업 범위
> _2021/08/14 ~ 2021/08/17_ 
- [x] 로그인 화면 _( 08/14 )  → **( 08/16 )**_
- [x] 회원가입 화면 _( 08/14 ) → **( 08/16 )**_
- [x] 홈 화면 _( 08/15 ) → **( 08/16 )**_
- [x] 스플래쉬 화면 _**( 08/17 )**_
- [x] 뼈대 레이아웃 구성(네비게이션 탭 등) _( 08/14 ) → **( 08/16 )**_
- [ ] 이미지 리소스 구하기 
- [ ] 자동 로그인 구현 >> 로그인이랑 회원가입 분리 후 시도해보기
> API
- [ ] Open API로 도로명 주소 가져오기
- [x] 회원가입 API 연동 _**( 08/16 )**_
- [x] 로그인 API 연동 >> 서버가 열리면 테스트 하기 >> _**( 08/17 )**_

# 📌 2주차 목표 작업 범위
> _2021/08/17 ~ 2021/08/24_     
> 개인 목표: 하루에 1.5개 완벽하게 완성하기 ( 17 ⭕ / 18 ⭕ )
- [x] 상품 디테일 화면 **_( 08/17 )_**
- [ ] 나의 당근 페이지 _( 08/18 )_
- [ ] 판매내역
- [ ] 상품 등록
- [ ] 카테고리
- [ ] 검색화면
- [ ] 앱 설정
- [x] 회원가입 화면 다시 구현하기 **_( 08/18 )_**
> API
- [x] 나의 당근 페이지 API
- [x] 새로 작성된 회원가입 API >> 서버가 열리면 테스트 하기
- [ ] 새로 작성된 로그인 API
<br />

# 📌 개발일지
> _2021/08/14 ~ 2021/08/27_ 까지의 과정을 담은 개발일지 
## 2021년 08월 14일 🌞
- 개발환경 구축 ( 70% ✔)
  - Sourcetree 사용에 어려움이 있어 **GitHub Desktop** 으로 변경하여 진행하도록 함.
- 뼈대 레이아웃 구성 ( 50 % ✔)

## 2021년 08월 15일 🌞💧
- 개발환경 구축 ( 100% ✔)
- 로그인 화면 구현 ( 90% ✔)
- 이미지 리소스 구하기

## 2021년 08월 16일 🌞
- 로그인 화면 구현 **( 100% ✔)**
- 회원가입 화면 구현 **( 100% ✔)**
- **회원가입 API 엮기 ( 90% ✔)**
- 로그인 API 엮기
- 홈 화면 **( 100% ✔)**
- 스플래쉬 화면 **( 100% ✔)**
- 뼈대 레이아웃 디테일 구성 **( 100% ✔)**
- 이미지 리소스 구하기

## 2021년 08월 17일 🌪🌧 [1차 피드백]
- 로그인 API 연동 **( 100% ✔ )** 지만 로그인 방식 변경으로 수정하기
- 스플래쉬 화면 **( 100% ✔)**
- 자동 로그인

> ### 📌 1차 피드백 
> - floating action button 메인 액티비티에 구현하기 ( 완료 ✔ )
>   - int로 나눠줘서 동네생활이랑 다르게 나오도록하고, 나머지 프래그먼트 눌렀을 때는 없애주기     
>     - 시도 해본적 없어서 난이도를 모르겠음. 다른 것들 우선 진행하고 시도해볼 예정
> - 개발 우선순위의 7번 ~ 10번 사이로 구현해보기    
> - divider 코틀린 코딩 말고 item에 선 하나 그어줘도 됨.    
> - 처음 퍼블리싱 퀄리티를 잘 잡아두기 (나중에 해야지 하지말기 !!)


- 🚨 로그인 api를 사용하지 않고 회원가입 api를 사용자 api로 사용하기로 함. (회원가입과 로그인을 동시에 한다.)
```

[소셜 로그인 방식으로 진행]

 → 서버에서 문자 인증방식을 구현하기 어려워, id/pw/profileImage/nickname을 받아 회원가입 후 
   id/pw로 로그인하는 방식으로 상의 후 변경하였으나 (issue 2번 참고) 
   클라에서 기존 디자인을 변경해서 제작해야 하는 어려움이 발생함.
 
    →  로그인/회원가입에서 기존 디자인 방식 (번호 입력 후 인증번호를 받고 인증번호를 입력하면 로그인이 되는 방식)을 사용하되,
       번호는 id, 인증번호는 password로 구현하도록 함. (인증번호는 따로 발급받지 않는다.)
  
        →  서버에서는 구현 어려움을 줄이고, 클라에서는 디자인/퍼포먼스 퀄리티를 높일 수 있게됨 !
      
```
- 상품 디테일 화면 구현 **( 100% ✔)**
- 로그인화면 다시 구현하기
- **[Q]** 서버가 서버를 열여줘야만 작업할 수 있었던 issue가 있었으나, 
  - **[A]** 오늘이나 내일 aws서버로 옮기면 앞으로 서버가 계속 열려있을 거라고 말씀해주심!

## 2021년 08월 18일 🌞🌪
> Thread를 제외하고 삽질없이 착착 진행함 !
- **[Q]**  로그인/회원가입 클라 변경사항 서버에게 전달하고 서버 변경사항 전달받기
  - **[A]**  회원가입 시에는 번호를 아이디, 인증번호를 비밀번호로 받지만 로그인할 때는 일단 DB에 있는 번호라면 로그인되는 구조로 수정했다는 답변 받음 !
- 회원가입 화면 다시 구현하기 **( 100% ✔)** >> editText 디테일 신경쓰기
  - **[변경 구현]**  "인증문자 받기" >> "비밀번호 입력하기"
  - **[변경 구현]**  실제는 인증번호 "1234" 까지 입력하였을 때 버튼 색상이 변경 >> 4글자 입력 시 바뀌도록
  - 코틀린에서 제공하는 Timer 사용
  - 글자 지우면 다시 원래 상태로 돌아가게 + 글자 수 충족 못하면 다음으로 못 넘어가게~
- 회원가입 API 다시 엮기  **( 100% ✔)**
- 상품 디테일 화면 디테일 신경쓰기 **( 100% ✔)**
- 나의 당근 페이지 구현하기 **( 70% ✔)**
- 나의 당근 페이지 API 엮기  **( 80% ✔)**
- **[Q]**  나의 당근 페이지 API에 해시태그 값이 없어서 서버에 여쭤봄
  - **[A]**  userInfoIdx(유저 인덱스값)로 생각하고 구현하셨다는 답변을 받음 ! 
  - 유일한 값이니 용도가 맞을 것 같아서 답변대로 진행하도록 함
- **[Q]**  나의 당근 페이지의 주소 값이 비어있어서 GPS 구현 후 추가 해주실건지 여쭤봄
  - **[A]**  주소 데이터는 의논이 필요한 문제로 서버에서 api를 엮을지 클라에서 api를 엮을지 정해보기로 함
  - 우선 텍스트뷰로 남겨놓고 천천히 진행하기로 함



## 2021년 08월 19일 🌞🌪
- 나의 당근 페이지 API 엮기
  - 어제 나의 당근 페이지 API 엮기는 성공했는데, 바로 화면에 표시되는게 안된다.
  - Glide 사용
- 나의 당근페이지 구현
  - 나의 당근 페이지에 있는 목록들을 리사이클러뷰로 구현해야할지 아니면 그냥 Linear로 해줘야할지 모르겠어서 고민 해보기
- 판매내역 구현
  - TabLayout+Viewpager2 연결 성공
- 상품 등록 구현


<br />

# 📌 _Issue_
> 프로젝트를 진행하면서 발생한 문제와 해결 방안       
### 1. 안드로이드와 아이폰의 차이
  - **문제 🤦🏻‍♀ |** 아이폰과 안드로이드의 디자인이 달라 레이아웃 구성에 어려움을 겪음.
  - **해결 🙆🏻‍♀️ |** 안드로이드 공기계를 이용하기로 함 !

### 2. 회원가입 시 실제 받아오는 데이터와 서버 api에서 제공해주는 데이터 차이
  - **문제 🤦🏻‍♀ |** 실제 당근마켓 회원가입에서는 번호만 입력받아 회원가입/로그인을 진행하지만, 협업을 진행하는 서버 측에서 제공해주는 api에서는 아이디/패스워드/프로필 사진을 제공해준다. 레이아웃 구성 시 기존 번호만 받는 레이아웃으로 그대로 진행해야 할지 아니면 서버 api에서 주는 정보대로 구성해야 할지 어려움을 겪음.
  - **원인 💁🏻‍♀️ |** 서버 측 개발팀장님께서 번호 문자 인증이 어려워 일단 아이디/패스워드를 받아 jwt로 로그인하는 방식으로 구현하라고 말씀하셨음. 
  - **해결 🙆🏻‍♀️ |** 서버 개발자 + 서버측 개발팀장님의 의견에 따라 아이디/패스워드을 받아오는 레이아웃으로 재구성 함 !
```
   🚨 원래 방식으로 진행 하기로 다시 변경됨 ! (개발일지 2021년 08월 17일 참고)
```


### 3. API 엮는거에 대한 이해도 부족
  - **문제 🤦🏻‍♀ |** 회원가입 API에 바디 값이 4개 (id/pw/profileImage/nickname)인데, A 액티비티에서 id/pw 값을 받고 B 넘어간 후, B 액티비티에서 profileImage/nickname을 입력받고 싶은데 방법을 찾는데 어려움을 겪음.
  - **뻘짓 🙅🏻‍♀️ |**  A 액티비티에서 id/pw 값을 받고 profileImage/nickname 값을 임의로 입력하여 다음으로 넘어가면 저장된 id/pw 값을 불러오고 다시 요청을 보낸다. >> 요청이 2번 발생함 (X)
  - **원인 💁🏻‍♀️ |**  너무 어렵게 생각했던 것 같다 !
  - **해결 🙆🏻‍♀️ |**  A 액티비티에서 intent로 id/pw값을 넘겨주고 B 액티비티에서 최종 회원가입을 성공시킨다. >> 서버 측에서 적어준 vaildation 처리는 어떻게 되는건지 싶었지만 클라에서도 회원가입이 안되는 로직이 만들어 적용해야 되기 때문에 상관없을 것 같다.

### 4. Fragment에서 RecyclerView 사용하기
  - **문제 🤦🏻‍♀ |**  Activity(RecyclerView)와 Adapter를 연결해줄 때, LoginLocationActivity.kt에서 작성했던 것처럼 this를 context에 넘겨주는데, Fragment에서도 동일하게 코드를 작성해주었더니 thist에 빨간 줄이 발생하였다.
   ``` 
  [Activity] LoginLocationActivity.kt
   
        loginLocationAdapter = LoginLocationAdapter(this, locationArrayList)
        binding.loginLocationRvAround.adapter = loginLocationAdapter
   ```
  - **뻘짓 🙅🏻‍♀️ |**  [1] this를 어떻게든 사용하기 위해 @를 사용해보았다.   [2] 자바에서 처럼 getActivity를 사용해보았다.    [3] Activity()를 사용해보았다.
  - **원인 💁🏻‍♀️ |**  이 부분을 Activity에 작성할 경우 getActivity()를 this로 작성할 수 있는데, 이 클래스는 Fragment를 상속받으므로 해당 Fragment를 관리하는 Activity를 리턴하는 함수(getActivity())를 매개변수로 넘겨야 한다. 
  - **해결 🙆🏻‍♀️ |** 코틀린의 경우 Activity를 를 이용하여 부모 액티비티의 context 값을 가져와 사용할 수 있다. null 값의 예외처리를 보장하려면 requireActivity() 를 사용해야하므로, **requireActivity()** 사용이 권장된다고 한다. (requireContext()도 해봤는데 됐다!)  //DividerItemDecoration에서 this 값에도 사용하였다. 
   ```
   [Fragment] HomeFragment.kt
   
        homeAdapter = HomeAdapter(requireActivity(), productArrayList)
        binding.homeRv.adapter = homeAdapter
   ```
### 5. Floating Action Button Icon Color
  - **문제 🤦🏻‍♀ |** Floating Action Button의 Icon Color가 변경되지 않고 검정색으로 적용되있다.
  - **원인 💁🏻‍♀️ |** 자동완성에서도 android로 해주는데 왜 이러는지 모르겠음 //v23 이후 설계 지원 라이브러리의 경우 app 이라고 한다.
  - **뻘짓 🙅🏻‍♀️ |**  [1] android:Tint (x)
  - **해결 🙆🏻‍♀️ |** app:Tint="@color/white"로 해결 !


### 6. View 위치와 카드뷰 elevation의 관계 !
  - **문제 🤦🏻‍♀ |** Floating Action Button를 누르면 배경이 투명한 검정색이 되도록 하고 싶어서 View를 넣어줬는데, 전체를 덮는게 아니라 이미지나 탑바의 border 같은 거랑 특히 카드뷰가 View보다 앞에 나와있다. bringToFront()을 해주면 가장 앞으로 나온다길래 해주었는데, 카드뷰는 안 덮였다.
  - **원인 💁🏻‍♀️ |** Android의 뷰에는 X 및 Y 속성 외에도 Z 속성이 있다. Z 값이 더 높은 뷰가 다른 뷰 위에 표시된다고 한다.
  - **해결 🙆🏻‍♀️ |** 검색해도 모르겠어서 혹시나하고 카드뷰의 elevation 값을 조정 해보았더니..  
```
   <androidx.cardview.widget.CardView
        ...
      app:cardElevation="0dp"
        ...
   />
```
 ### 7. 서버 api URI 대소문자 구별하기 
  - **문제 🤦🏻‍♀ |** 로그인 api를 엮는 중에 포스트맨에서 "error": "Not Found" 가 발생했다.
  - **원인 💁🏻‍♀️ |** uri를 확인해보니 logIn(I 대문자)로 적으셨는데, 여태 login으로 post를 보내고 있었다.
  - **해결 🙆🏻‍♀️ |** 왜 에러가 발생했는지 api 문서를 되짚어 가며 해결 ! 
 
   
   
 <br />
 
# 📌 참고자료
- [Fragment Context](https://hanyeop.tistory.com/239)
- [Floating action button Animation](https://greimul.tistory.com/29)
- [CardView Z 속성](https://developer.android.com/guide/topics/ui/look-and-feel)
- [Viewpager2 Indicator custom](https://android-dev.tistory.com/12)
- [timer](https://magicalcode.tistory.com/49)
- [TabLayout+Viewpager2](https://sys09270883.github.io/app/44/)
